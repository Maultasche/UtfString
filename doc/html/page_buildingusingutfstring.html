<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>UtfString: Building and Using UtfString</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UtfString
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building and Using <a class="el" href="namespace_utf_string.html">UtfString</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="namespace_utf_string.html">UtfString</a> library is intended to be built and used on multiple platforms. The primary platforms that this library targets are Windows, Linux, and Mac OS X. Currently, UtfString builds on Windows and Linux. The Linux build could definitely be more robust, as I am still relatively new to Linux development, but it definitely builds and runs on Ubuntu. No build process has yet been created for Mac OS X, but since OS X is POSIX-compliant, the process for building it on Linux will likely work for Mac OS X as well. I plan on creating an Xcode project for <a class="el" href="namespace_utf_string.html">UtfString</a>, but this hasn't been done yet.</p>
<p>If you wish to help improve the UtfString library build process on Linux or Mac OS X, or even non-primary platforms, please see the <a class="el" href="page_developersnotes.html">Developer's Notes</a> for more information.</p>
<ul>
<li>
<a class="el" href="page_buildingusingutfstring.html#section_buildingwindowsvs">Building UtfString on Windows using Visual Studio</a> </li>
<li>
<a class="el" href="page_buildingusingutfstring.html#section_usingwindowsvs">Using UtfString in Your Application on Windows using Visual Studio</a> </li>
<li>
<a class="el" href="page_buildingusingutfstring.html#section_buildingusingwindowsdevcpp">Building and Using UtfString on Windows using Dev-C++</a> </li>
<li>
<a class="el" href="page_buildingusingutfstring.html#section_linuxcommandline">Building and Using UtfString on Linux on the Command Line</a> </li>
<li>
<a class="el" href="page_buildingusingutfstring.html#section_macoxcommandline">Building and Using UtfString on Mac OS X on the Command Line</a> Building and Using <a class="el" href="namespace_utf_string.html">UtfString</a> on Mac OS X on the Command Line </li>
</ul>
<h1><a class="anchor" id="section_buildingwindowsvs"></a>
Building UtfString on Windows using Visual Studio</h1>
<p>The project and solution files for Visual Studio are located in the build\win32\VS* subdirectories. There are currently project and solution files for Visual Studio 2005, 2010, and 2012.</p>
<p>To build just the UtfString library, use the UtfString.sln solution. If you would like to build the unit tests to verify that UtfString is working for you (recommended), use the UtfStringUnitTests.sln solution, which builds both the UtfString library and the unit tests, and allows you to easily run the unit tests.</p>
<dl class="section note"><dt>Note</dt><dd>Advanced Users: If you are already intimately familiar with building libraries under Visual Studio, you don't need to go through the rest of this section. To compile the unit tests, you need CppUnit. You should be able to handle the rest on your own.</dd></dl>
<p>When you have loaded the solution, there should be a be a solution configuration dropdown list in the toolbar. If in the unlikely event that it isn't there, you will have to add the toolbar that contains it or add it to an existing toolbar through customization.</p>
<div class="image">
<img src="vssolutionconfiguration.png" alt="vssolutionconfiguration.png"/>
<div class="caption">
The solution configuration dropdown list</div></div>
<p> There are four solution configurations for UtfString.</p>
<ol>
<li>
<b>Debug</b> - Builds a UtfString dll and export library with debug symbols and no optimization. Use this configuration when you are using the library as a dll (recommended), and need a debug-mode library to link against.  </li>
<li>
<b>Release</b> - Builds a UtfString dll and export library with no debug symbols and optimization. Use this configuration when you are using the library as a dll (recommended), and need a release-mode library to link against.  </li>
<li>
<b>Static Debug</b> - Builds a static library with debug symbols and no optimization to link against. This is not the recommended way of building UtfString, as it creates a huge file containing the entire runtime library, resulting in a great deal of unneeded code.  </li>
<li>
<b>Static Release</b> - Builds a static library with no debug symbols and optimization to link against. This is not the recommended way of building UtfString, as it creates a huge file containing the entire runtime library, resulting in a great deal of unneeded code.  </li>
</ol>
<p>When you load the solution, the solution configuration will probably be set to the Debug configuration.</p>
<p>Note you will probably want to build UtfString as a dll in Debug and Release mode . First of all, dlls are nicer and more flexible than static libraries: they are much smaller, are loaded only when first needed, preventing the executable file from getting too big and using up a bunch of memory all at once, and can easily be updated within an application without recompiling the entire applications. Secondly, you will most likely need to use the debug dll when your application is in debug mode and the release dll when your application is in release mode. This is not necessary for some dlls, but it is necessary when building UtfString with Visual Studio, because UtfString exports STL classes: when STL classes are exported from the dll, the application needs to use the same runtime as the dll. We'll cover how to set up your application project to do this automatically in the following section on using the UtfString library in your application.</p>
<p>If you are building the unit tests (recommended), you must have the Cppunit library available. Download the  Cppunit Library and unzip it to the directory where you put your C++ libraries. Now find the Visual C++ 6 workspace, CppUnitLibrary.dsw, under the src directory and double-click on it. Allow Visual Studio to convert the Visual C++ 6 workspace to a solution, and build Cppunit in Debug and Release mode. After doing this, you should now have the folowing files in the CppUnit lib subdirectory: cppunitd_dll.lib, the debug import library, cppunitd_dll.dll, the debug dynamic library, cppunit_dll.lib, the release import library, and cppunit_dll.dll, the release dynamic library.</p>
<p>Now once you have CppUnit built, Visual Studio needs to know where to find the CppUnit header and library files. On the "Tools" menu in Visual Studio, select the "Options..." menu item. On the popup that appears select the "Projects and Solutions"-&gt;"VC++ Directories" node in the tree on the left. In the "Show directories for:" dropdown box, select the "Include Files" option. Then add the path to Cppunit's include directory to the list below where the path is [CppUnit Directory]\include. This tells Visual Studio to look for include files in CppUnit's include directory. Once that is done, select the "Library Files" option in the dropdown box. Add the path to CppUnit's lib directory to the list below where the path is [CppUnit Directory]\lib. This tells Visual Studio that it should look for library files in the CppUnit's lib directory. Click the OK button. This will allow Visual Studio to automatically find CppUnit include and library files, so that the project does not have to know the exact path of these files, allowing the project to be used on other machines where the paths will probably be different.</p>
<div class="image">
<img src="vslibrarypaths.png" alt="vslibrarypaths.png"/>
<div class="caption">
Setting the paths to the CppUnit library and header files</div></div>
<p> The only thing left to do is to copy the CppUnit dlls, cppunitd_dll.dll and cppunit_dll.dll from the CppUnit lib subdirectory to the UtfString test\bin subdirectory. Unless you wish to add the CppUnit lib directory to the system path or copy the CppUnit dlls to the system directory, this is necessary so that the UtfString unit tests can find the CppUnit dlls they need to run.</p>
<p>Now you can finally build the UtfString solution by pressing Ctrl+Shift+B or selecting the "Build Solution" menu item.</p>
<p>While building the library as a dll under Windows, it is normal to see a bunch of warnings that relate to exporting templates. These warnings relate to the fact that if you use a different C++ runtime in an application than that of the dll, there could be problems. However, as long as you stick to using the debug version of UtfString with the debug builds of your application, and the release version of UtfString with the release builds of your application, you won't have any such problems.</p>
<p>The build should complete, you should be able to find the built library files in the lib subdirectory.</p>
<p>The following list indicates the files that should be built for each solution configuration. There may be some files built that are not listed (incremental linker files, etc.), but we don't consider those important in the context of this documentation.</p>
<p><b>Debug</b> </p>
<ul>
<li>
UtfStringd.dll - The debug version of the UtfString library </li>
<li>
UtfStringd_dll.exp - The export definitions file for the UtfString dll: this is used to resolve linking issues if the export library isn't used. This file is usually ignored in favor of the export library. </li>
<li>
UtfStringd_dll.lib - The export library file: linking to this file resolves linking issues when using the UtfString library as a dll. </li>
</ul>
<p><b>Release</b> </p>
<ul>
<li>
UtfString.dll - The release version of the UtfString library </li>
<li>
UtfString_dll.exp - The export definitions file for the UtfString dll: this is used to resolve linking issues if the export library isn't used. This file is usually ignored in favor of the export library. </li>
<li>
UtfString_dll.lib - The export library file: linking to this file resolves linking issues when using the UtfString as a dll. </li>
</ul>
<p><b>Static Debug</b> </p>
<ul>
<li>
UtfStringd.lib - The debug version of the the UtfString library. Everything needed is contained within this library, but it's a rather large file. </li>
</ul>
<p><b>Static Release</b> </p>
<ul>
<li>
UtfString.lib - The debug version of the the UtfString library. Everything needed is contained within this library, but it's a rather large file. </li>
</ul>
<h1><a class="anchor" id="section_usingwindowsvs"></a>
Using UtfString in Your Application on Windows using Visual Studio</h1>
<p>Now that you've built the UtfString library, you can use it in your own application. This section is going to guide you through creating a simple application.</p>
<dl class="section note"><dt>Note</dt><dd>Advanced Users: If you are already intimately familiar with using libraries in your application using Visual Studio, you don't need to go through the rest of this section. All you need to know is that you should define the UTFSTRING_DLL preprocessor symbol in your application project when using UtfString as a dll and that you should save your code files as UTF-8 when they contain Unicode literals. You should be able to handle the rest on your own.</dd></dl>
<p>In Visual Studio, create an empty C++ console application. Create a single code file containing the following code.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_utf_string_8h.html">utfstring/UtfString.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>UtfString;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="struct_utf_string_1_1_utf8_string.html" title="Contains and manages a UTF-8 string. ">Utf8String</a> utf8String = <span class="stringliteral">&quot;Söß3∑д&quot;</span>;</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;The contents of the string: &quot;</span> &lt;&lt; utf8String &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_utf_string_1_1_utf8_char.html" title="Provides a copy of a UTF-8 character embedded in a UTF-8 string. ">Utf8Char</a> utf8Char = utf8String[2];</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;The third character of the string is: &quot;</span> &lt;&lt; utf8Char &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This code will create a small UTF-8 string, print out the contents of the string, and then retrieve and print out the third character.</p>
<p>Make sure that the code file is saved as a UTF-8 text file, by selecting the "File-&gt;Advanced Save
Options" menu item, selecting the "Unicode (UTF-8 without signature)" encoding, and clicking the "OK" button.</p>
<p>Once we have the code, we need to tell Visual Studio where to find the include and library files for UtfString. There are two ways of doing it. You can put the path to the include and library files in the project file or you can add it to the lists of include and library directories. Putting the paths in the project has the advantage of not requiring programmers to specify the paths every time the project is moved to another machine, but the disadvantage is that the programmer will probably be forced to change the paths in each project file, since files are usually located in different places on different machines. We use this strategy in the UtfString unit test project, since all the necessary files are bundled together in the UtfString library distribution, allowing us to specify the relative include and library paths with little chance of them being incorrect. Any projects external to the UtfString distribution, however, cannot count on the paths always being the same. We do not recommend this practice in of your projects.</p>
<p>Adding the include and library paths to the Visual Studio directory lists has the disadvantage of not moving with the project, but has the advantage of applying to all project built under Visual Studio. The path only has to be specified once, and can be used by any project from then on. We strongly recommend this approach to specifying the include and library paths for your projects. You will only have to specify them once on a machine, and your projects won't have to worry about files being in different directories every time someone else loads the project.</p>
<p>To specify the include and library paths in Visual Studio, select the "Tools-&gt;Options..." menu item. In the window that appears, click on the "Project and Solutions-&gt;VC++ Directories" item in the tree on the left. Then in the "Show directories for" dropdown, select "Include files". In the list box below, add the path to the UtfString "include" subdirectory. Switch to "Library files" in the drop down, and add the path to the UtfString "lib" subdirectory. Click the "OK" button. Visual Studio now knows where to search for the UtfString library and header files.</p>
<div class="image">
<img src="vslibrarypaths.png" alt="vslibrarypaths.png"/>
<div class="caption">
Setting the paths to the UtfString library and header files</div></div>
<p> You have told Visual Studio where to search for the UtfString library and header files. Visual Studio will know which header files it needs to find from the #include statements in the code, but it does not yet know which library files it is supposed to link. To indicate which library files to link, right-click on the application project file and select the "Properties" menu item. In the properties window, click on the "Configuration Properties-&gt;Linker-&gt;Input" item in the tree on the left. Then on the right side, under "Additional Dependencies", type in the names of the libraries to be linked, where the library file names are separated by a space.</p>
<div class="image">
<img src="vsprojectlibraries.png" alt="vsprojectlibraries.png"/>
<div class="caption">
Setting the paths to the UtfString library and header files</div></div>
<p> At this point, you'll need to pay close attention to the "Configuration" dropdown in the upper-left. Yours will most likely indicate that it's the debug configuration. The configuration that is currently beung used by Visual Studio to build the solution will appear in the dropdown, and will appear as "Active(Configuration)". Setting a property in the property window will only set the property for the selected configuration. This allows us to specify separate settings for separate configurations.</p>
<p>So in the Debug configuration in your application, add the UtfString debug library to the "Additional Dependencies". If you are using UtfString as a dll, you will want to link to the link library, UtfStringd_dll.lib. If you are using the static library, you will want to link to UtfStringd.lib. Now in the configuration dropdown in the upper-left, switch the selected configuration to "Release" and add the library to the "Additional Dependencies" for that configuration. If you are using UtfString as a dll, you will want to link to UtfString_dll.lib. If you are using the static library, you will want to link to UtfString.lib.</p>
<p>If you are using the UtfString dll, you will need to add a preprocessor symbol. Go to "Configuration Properties-&gt;C/C++-&gt;Preprocessor". In the "Preprocessor Definitions" setting on the right add the "UTFSTRING_DLL" symbol, making sure that it is separated from the others by a semicolon. Also make sure that WIN32 is defined as well. This symbol is usually added when Visual Studio creates the project. Do this for the Debug and Release configurations.</p>
<p>Now that the properties have been set, click the "OK" button to have the settings take effect. Build the application in the Debug and Release configurations. You should be able to build without errors. At this point if you are using UtfString as a dll, you will need to make the dlls available to the application. For now, it will probably be easiet to copy the dlls from the UtfString lib subdirectory and place them in the same place as the application executable. UtfStringd.dll should be placed alongside the debug executable and UtfString.dll should be placed alongside the release executable.</p>
<p>Now run the application by pressing Ctrl+F5, which runs the application without debugging. Running it in this manner pauses the console window, allowing you to see the output. Running the application in debug mode by pressing F5 won't result in the console window pausing, causing it to disappear before you can see the output.</p>
<p>The console window will most likely be using a language-specific code page instead of the entire Unicode character set, so it's likely that some of the characters in the string will be output as nonsense characters. You will, however, be able to see if it is running correctly.</p>
<h1><a class="anchor" id="section_buildingusingwindowsdevcpp"></a>
Building and Using UtfString on Windows using Dev-C++</h1>
<p>You can build UtfString with Dev-C++ by opening the UtfString.dev project file in the build\win32\DevCpp subdirectory. Compile the library and you should find the following files in the lib subdirectory.</p>
<ul>
<li>
libUtfString.a - This is the link library to use when linking an application that uses UtfString </li>
<li>
libUtfString.def - The dll export definitions file </li>
<li>
UtfString.dll - The dll containing the UtfString library </li>
</ul>
<p>That's all there is to it. You shouldn't get any errors or warnings while building UtfString. Once UtfString has been built, you can use it in your application. Add the include subdirectory to the application's include files path and add the lib subdirectory to the application's library files path. Include "&lt;utfstring/UtfString.h&gt;" in the source file and link to "libUtfString.a", and you should be able to use the UtfString classes in your appliation.</p>
<h1><a class="anchor" id="section_linuxcommandline"></a>
Building and Using UtfString on Linux on the Command Line</h1>
<h1><a class="anchor" id="section_macoxcommandline"></a>
Building and Using UtfString on Mac OS X on the Command Line</h1>
<p>A Mac OS X-specific build process has not yet been created. However, the library will most likely build if you open a terminal window and follow the Linux build instructions. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 22 2013 21:27:23 for UtfString by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
