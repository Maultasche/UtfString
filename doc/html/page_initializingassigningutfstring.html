<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>UtfString: Initializing a UtfString</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UtfString
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Initializing a <a class="el" href="namespace_utf_string.html">UtfString</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The strings in the UtfString library have been designed to be as similar as possible to the STL strings. As a result, UtfStrings are initialized much like the STL strings.</p>
<p>First of all, a UtfString can be constructed but not initialized, which creates an empty string</p>
<div class="fragment"><div class="line">Utf8String utf8String;</div>
<div class="line">Utf16String utf16String;</div>
</div><!-- fragment --><p>UtfString constructors accept a variety of commonly-used string data types, including const char*, std::string, const wchar_t*, etc. UtfStrings can be initialized using these data types.. The exact data types can be determined by looking at the <a class="el" href="struct_utf_string_1_1_utf8_string.html">Utf8String </a> and <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a> constructors. Note that both <a class="el" href="struct_utf_string_1_1_utf8_string.html">Utf8String </a> and <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a> constructors accept accept similar types of strings, but there are small differences between them. <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a> constructors, for example, accept more 16-bit string types than <a class="el" href="struct_utf_string_1_1_utf8_string.html">Utf8String </a> constructors, since it is much more likely that 16-bit string types will be passed to <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a>. Even if you wish to initialize a <a class="el" href="struct_utf_string_1_1_utf8_string.html">Utf8String </a> with a more obscure 16-bit string data type, it can easily be done by passing it to a <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a> constructor and then passing the <a class="el" href="struct_utf_string_1_1_utf16_string.html">Utf16String </a> instance to <a class="el" href="struct_utf_string_1_1_utf8_string.html">Utf8String </a>.</p>
<p>Initialization and assigning are done in pretty much the same way. The only significant difference is that the string instance is declared during initialization.</p>
<div class="fragment"><div class="line"><span class="comment">//Example of initialization</span></div>
<div class="line">Utf8String utf8String = <span class="stringliteral">&quot;A string&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Example of assignment</span></div>
<div class="line">utf8String = <span class="stringliteral">&quot;Another string&quot;</span>;</div>
</div><!-- fragment --><p>Here are some examples of initialization and assignment. Please read the commentary carefully, as it may save you from some painful mistakes.</p>
<p>First off, let's start by initializing some strings with an ordinary ASCII string constant.</p>
<div class="fragment"><div class="line"><span class="comment">//Initialize Utf8String using an ordinary ASCII string constant</span></div>
<div class="line">Utf8String utf8String = <span class="stringliteral">&quot;This is a simple string&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Initialize Utf16String using an ordinary ASCII string constant</span></div>
<div class="line">Utf16String utf16String = <span class="stringliteral">&quot;This is a simple string&quot;</span>;</div>
</div><!-- fragment --><p>After the initialization, both strings will contain the same string, with utf8String storing the string as 8-bit UTF-8 code units, and utf16String storing the string as 16-bit UTF-16 code units. The encodings are different, but the two strings are equal to each other, since the Unicode characters (the code points) are the same.</p>
<p>Now we're going to assign a bunch of Unicode characters that are clearly not ASCII characters The source file containing this code has to be saved in a format that will preserve the characters, such as UTF-8 or UTF-16. If saved in a format that just stores 8-bit ASCII or ANSI characters, these characters will be converted in the source file to some other characters that fit in the encoding, and the string will be transformed into something different. So if you use characters not found in ASCII, make sure that you save the source code file as UTF-8 or UTF-16.</p>
<div class="fragment"><div class="line">utf8String = <span class="stringliteral">&quot;ωE4ڽhъ&quot;</span></div>
<div class="line">utf16String = <span class="stringliteral">&quot;ωE4ڽhъ&quot;</span></div>
</div><!-- fragment --><p>The fourth character is some sort of Arabic character that may or may not display properly depending on which browser you are using to view this code and what sort of characters your operating system and/or browser are capable of displaying. It may be displayed properly (looks a little like the character "Ü") or it may be displayed as question mark or rectangle.</p>
<p>Note that the string constants in quotations in the code above are 8-bit strings. If the source file containing the code is saved as UTF-8, these strings will be encoded as 8-bit UTF-8 code units. If the source code file is saved as UTF-16, the characters will be preserved in the file just fine, but at runtime the 16-bit UTF-16 code units will be shoved into an 8-bit string. This means half of the code unit is going to get chopped off, and the string that results will be something very different.</p>
<p>Putting an "L" before the string will force the string constant to be a wide character string, which is an array of wchar_t in C++. This will give it enough space to hold an entire 16-bit code unit.</p>
<p>The following code works only if the source code file is saved in a UTF-16-encoded file.</p>
<div class="fragment"><div class="line"><span class="comment">//Assign a wide string constant</span></div>
<div class="line">utf8String = L<span class="stringliteral">&quot;Sẫböß3ẫ∑д&quot;</span>;</div>
<div class="line">utf16String = L<span class="stringliteral">&quot;Sẫböß3ẫ∑д&quot;</span>;</div>
</div><!-- fragment --><p>Some compilers make wchar_t 16-bit and some compilers make wchar_t 32-bit. For UTF-16 and UTF-8 encodings, the width of wchar_t is irrelevant. If the string is a wide string, each 8-bit or 16-bit code unit will be placed in a wchar_t and will fit without truncation.</p>
<dl class="section attention"><dt>Attention</dt><dd><em>Please note that the source code file must be saved as UTF-8 or UTF-16 if the non-ASCII characters are to be preserved. Otherwise the bytes that comprise your non-ASCII characters will be interpreted as ASCII characters, which are sure to be different characters entirely.</em></dd></dl>
<p>The UtfString library makes the assumption that if it receives a wide character string (wchar_t* or std::wstring), the wide character string is encoded as UTF-16, as there is no sense in storing a UTF-8 string in a wide character string. So if you saving a source code file as UTF-8, it is advisable to use an 8-bit character string, " ". If you are saving a source code file as UTF-16, it is advisable to use a wide character string, L" ".</p>
<p>The UtfString constructors can handle both standard strings and wide strings, so it doesn't matter to UtfString whether the string constant used to initialize a UtfString instance is in UTF-8, UTF-16, or ASCII encoding. </p>
<ul>
<li>
ASCII encoding is the most compact, but will only store ASCII characters  </li>
<li>
UTF-8 encoding will preserve all Unicode characters. It is more space-efficient for lower- valued Unicode characters, such those in European languages. It is less space-efficient for higher-valued Unicode characters, such as those in Asian languages.  </li>
<li>
UTF-16 encoding will preserve all Unicode characters. It is less space-efficient for lower- valued Unicode characters, such those in European languages. It is more space-efficient for higher-valued Unicode characters, such as those in Asian languages.  </li>
</ul>
<p>Although the characters typed into a string constant are encoded however the file is encoded, you can still specify UTF-8 string constants in a UTF-16-encoded source file or UTF-16 string constants in a UTF-8-encoded files using escape sequences. In some cases your system might not be even capable of displaying or inputting more obscure characters at the upper end of the Unicode character set, so escape sequences might be the only way of specifying the character in a string. An escape sequence specifying a code unit looks like '\xhh'(an 8-bit code unit) or '\xhhhh (a 16-bit code unit), where 'h' represents a hexidecimal digit. Escape sequences and characters can be mixed together just as with the standard '\t' or '\n' escape sequences.</p>
<p>In some cases, it may be necessary to separate the string constants on the same line in order to distinguish what is part of an escape sequence and what is not. For example, if you want to specify a code unit with the value of 0x34 followed by the string "56", you might type "\x3456". The C++ compiler, however, would interpret that as the 16-bit code unit, 0x3456. In order to indicate what belongs to the escape sequence and what doesn't, you may have to separate them into string constants separated by a space like so.</p>
<div class="fragment"><div class="line">Utf8String utf8String = <span class="stringliteral">&quot;\x34&quot;</span> <span class="stringliteral">&quot;56&quot;</span>;</div>
</div><!-- fragment --><p>The C++ compiler will take those two string constants and put them together like they were one string constant. Separating characters from escape sequences isn't always required: it's just required where a character (usually A-F, 0-9) could be mistaken as part of the escape sequence.</p>
<p>Here's a much lengthier example of strings with escape sequences, which are found in the UtfString library unit tests.</p>
<div class="fragment"><div class="line"><span class="comment">//Here is the string constant (UTF-8 assuming the source code file is saved as UTF-8) with </span></div>
<div class="line"><span class="comment">//mixed characters and escape sequences.  So far, I haven&#39;t found any way to input or</span></div>
<div class="line"><span class="comment">//display the four-code-unit UTF-8 code points, which are more obscure characters like</span></div>
<div class="line"><span class="comment">//cuneiform characters,  so I have to specify them using escape sequences.</span></div>
<div class="line">Utf8String utf8StringWithChars = <span class="stringliteral">&quot;\xF0\x92\x81\xA8&quot;</span> <span class="stringliteral">&quot;Sẫböß3ẫ∑&quot;</span> <span class="stringliteral">&quot;\xF0\x90\x8D\x86д&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Here is the same string with only UTF-8 code unit escape sequences.  This string can be </span></div>
<div class="line"><span class="comment">//used to specify a UTF-8 string no matter how the source code file in encoded.</span></div>
<div class="line">Utf8String utf8String = <span class="stringliteral">&quot;\xF0\x92\x81\xA8\x53\xE1\xBA\xAB\x62\xC3\xB6\xC3\x9F\x33\xE1\xBA\xAB\xE2\x88\x91\xF0\x90\x8D\x86\xD0\xB4&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Here is the same string converted to UTF-16 code unit escape sequences. This string can be </span></div>
<div class="line"><span class="comment">//used to specify a UTF-16 string no matter how the source code file in encoded.</span></div>
<div class="line">Utf16String utf16String = L<span class="stringliteral">&quot;\xD808\xDC68\x0053\x1EAB\x0062\x00F6\x00DF\x0033\x1EAB\x2211\xD800\xDF46\x0434&quot;</span>;</div>
</div><!-- fragment --><p>Note that the UTF-16 string in the code above is stored using a wide character string constant. The 16-bit code units wouldn't fit into a standard string constant.</p>
<p>In the code above, we didn't have to separate the first two string constants when initializing "utf8StringWithChars": the character 'S' could not possibly be mistaken as part of the escape sequence '\xA8'; we just wrote it that way to illustrate how to separate escape sequences from characters.</p>
<p>Here are some more example of string assignments</p>
<div class="fragment"><div class="line"><span class="comment">//Utf8String and Utf16String instances can be assigned to each other</span></div>
<div class="line">Utf8String utf8String = <span class="stringliteral">&quot;Sẫböß3ẫ∑д&quot;</span>;</div>
<div class="line">Utf16String utf16String = utf8String;</div>
<div class="line">utf8String = utf16String;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Utf8String and Utf16String instances can be assigned using std::string or std::wstring</span></div>
<div class="line">std::wstring wideString = L<span class="stringliteral">&quot;I am a wide string&quot;</span>;</div>
<div class="line">std::string narrowString = <span class="stringliteral">&quot;I am a narrow string&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//The std::wstring is assumed to be a string of UTF-16 code units</span></div>
<div class="line">Utf8String utf8String = wideString;</div>
<div class="line">Utf16String utf16String = wideString;</div>
<div class="line"></div>
<div class="line"><span class="comment">//The std::string is assumed to be a string of UTF-8 code units</span></div>
<div class="line">utf8String = narrowString;</div>
<div class="line">utf16String = narrowString;</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 22 2013 21:27:23 for UtfString by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
